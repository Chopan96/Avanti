{% extends 'base.html' %}
{% load static %}
{% block title %}Ver Horarios{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/calendario.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="cuadro">
        <div class="contenedor">
            <h1>Horarios de {{ medico.usuario.first_name }} {{ medico.usuario.last_name }}</h1>
            <hr>
            <div id="calendario" style="display: block;">
                <div id="calendar" data-medico-rut="{{ medico.usuario.rut }}"></div>
            </div>

            <!-- Botones para editar y eliminar horario -->
            <div id="horario-actions" style="display: none;">
                <hr>
                <h3>Editar Horario</h3>
                <label>Inicio:</label>
                <input type="datetime-local" id="fechainicio">
                <label>Fin:</label>
                <input type="datetime-local" id="fechafin">
                <button class="btn btn-primary" id="saveBtn">Guardar Cambios</button>
                <button class="btn btn-danger" id="deleteBtn">Eliminar Horario</button>
            </div>
        </div>
        <div class="botones">
            <a href="{% url 'administrativo:lista_medicos' %}" class="btn btn-primary" id="volver">Volver</a>
        </div>
    </div>
</div>

<!-- Modal para mostrar mensajes -->
<div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="messageModalLabel">Mensaje</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalMessage">
                <!-- Aquí irá el mensaje dinámico -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/calendario_administrativo.js' %}"></script>
{% endblock %}
