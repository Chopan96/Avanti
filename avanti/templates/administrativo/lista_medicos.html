


    {% extends 'base.html' %}
    {% load static %}
    {% block title %}Registrar Disponibilidad{% endblock %}
    
    {% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/formulario.css' %}">
    {% endblock %}
    
    
    {% block content %}
    <div class="container mt-4" id="mensaje">
        <div class="formulario">
            <h1 class="text-center mb-4">Lista de Médicos</h1>
            <div class="table-responsive">
                <table class="table table-striped table-bordered text-center">
                    <thead class="table-primary">
                        <tr>
                            <th>RUT</th>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Especialidad</th>
                            <th>Email</th>
                            <th>Teléfono</th>
                            <th>Disponibilidad</th>
                            <th>Horarios</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for medico in medicos %}
                        <tr>
                            <td>{{ medico.usuario.rut }}</td>
                            <td>{{ medico.usuario.first_name }}</td>
                            <td>{{ medico.usuario.last_name }}</td>
                            <td>{{ medico.especialidad }}</td>
                            <td>{{ medico.usuario.email }}</td>
                            <td>{{ medico.usuario.fono }}</td>
                            <td>
                                <a href="{% url 'administrativo:crear_disponibilidad' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-success mb-1">
                                    Crear
                                </a>
                                <a href="{% url 'administrativo:ver_disponibilidades' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-info">
                                    Ver
                                </a>
                            </td>
                            <td>
                                <a href="{% url 'administrativo:generar_horarios' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-success mb-1">
                                    Crear
                                </a>
                                <a href="{% url 'administrativo:ver_horarios' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-info">
                                    Ver
                                </a>
                            </td>
                            <td>
                                <a href="{% url 'administrativo:editar_medico' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-warning mb-1">
                                    Editar
                                </a>
                                <a href="{% url 'administrativo:eliminar_medico' medico.usuario.rut %}" 
                                   class="btn btn-sm btn-danger"
                                   onclick="return confirm('¿Estás seguro de que deseas eliminar este médico?');">
                                    Eliminar
                                </a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="9" class="text-center text-muted">No hay médicos registrados.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="botones mt-3">
                <a href="{% url 'administrativo:registrar_medico' %}" class="btn btn-success me-4">
                    Registrar un nuevo médico
                </a>   
                <a href="{% url 'administrativo:administrativo_main' %}" class="btn btn-primary" id="volver">Volver</a> 
            </div>
        </div>
    

    </div>
    
    <!-- Cargar el archivo JS -->
    <script src="{% static 'js/validar_rut.js' %}"></script>
    {% endblock %}